# CardCraft Studio - Setup Quick Reference

## üöÄ Quick Start Commands

```bash
# Complete automated setup (recommended for new users)
npm install                    # Install dependencies
npm run setup:local-env        # Configure local environment
npm run setup:cloud-env        # Provision Google Cloud resources
npm run setup:github-secrets   # Configure GitHub Actions
npm run dev                    # Start development server
```

## üìã Setup Scripts

| Command | Purpose | Prerequisites |
|---------|---------|---------------|
| `npm run setup:local-env` | Create local `.env` files | None |
| `npm run setup:cloud-env` | Provision GCP resources | gcloud CLI |
| `npm run setup:github-secrets` | Set GitHub secrets | gh CLI |

## üîë Required Credentials

### Must Obtain Manually
- **Google OAuth Client ID & Secret** - [Create here](https://console.cloud.google.com/apis/credentials)
- **Google API Key** - [Create here](https://console.cloud.google.com/apis/credentials)
- **Custom Search Engine ID** - [Create here](https://programmablesearchengine.google.com/)
- **Stripe Keys** (optional) - [Get here](https://dashboard.stripe.com/apikeys)

### Auto-Generated by Scripts
- `TOKEN_ENCRYPTION_KEY` - 32-char random string
- `JWT_SECRET` - 64-char random string

## üìÅ Environment Files

### Backend: `apps/backend/.env`
```env
GOOGLE_API_KEY=              # From Google Cloud Console
GOOGLE_CUSTOM_SEARCH_CX=     # From Programmable Search
GOOGLE_CLOUD_PROJECT=        # Your GCP project ID
GOOGLE_APPLICATION_CREDENTIALS=./serviceAccountKey.json
GOOGLE_CLIENT_ID=            # OAuth Client ID
GOOGLE_CLIENT_SECRET=        # OAuth Client Secret
GOOGLE_REDIRECT_URI=http://localhost:5173/oauth-callback.html
TOKEN_ENCRYPTION_KEY=        # Auto-generated
JWT_SECRET=                  # Auto-generated
PORT=3001
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:4173
STRIPE_SECRET_KEY=           # Optional
STRIPE_WEBHOOK_SECRET=       # Optional
STRIPE_PRICE_ID=             # Optional
ADMIN_BOOTSTRAP_EMAIL=your.email@example.com
```

### Frontend: `apps/web/.env`
```env
VITE_GOOGLE_CLIENT_ID=       # Same as backend
VITE_API_BASE_URL=http://localhost:3001
```

## üå•Ô∏è Google Cloud Resources

### Created by `setup:cloud-env`
- ‚úÖ GCP Project
- ‚úÖ 12 APIs enabled
- ‚úÖ Service accounts (2)
- ‚úÖ IAM roles configured
- ‚úÖ Workload Identity Federation
- ‚úÖ Firestore database
- ‚úÖ Service account key downloaded

### Still Need Manual Setup
- OAuth 2.0 Client credentials
- API Key
- Custom Search Engine

## üîê GitHub Secrets

### Set by `setup:github-secrets`
- `GCP_PROJECT_ID`
- `WIF_PROVIDER`
- `WIF_SERVICE_ACCOUNT`
- `GOOGLE_API_KEY`
- `GOOGLE_CUSTOM_SEARCH_CX`
- `GOOGLE_CLIENT_ID`
- `GOOGLE_CLIENT_SECRET`
- `TOKEN_ENCRYPTION_KEY`
- `JWT_SECRET`
- `STRIPE_SECRET_KEY`
- `STRIPE_WEBHOOK_SECRET`
- `VITE_API_BASE_URL`

## üõ†Ô∏è Development Commands

```bash
npm run dev              # Start both frontend and backend
npm run dev:web          # Frontend only (port 5173)
npm run dev:backend      # Backend only (port 3001)
npm test                 # Run all tests
npm run build            # Build for production
```

## üêõ Troubleshooting

| Issue | Solution |
|-------|----------|
| "gcloud: command not found" | Install from https://cloud.google.com/sdk/docs/install |
| "gh: command not found" | Install from https://cli.github.com/ |
| "Firestore is not initialized" | Check service account key path and permissions |
| API key errors | Verify API key in .env and APIs enabled in GCP |
| CORS errors | Check ALLOWED_ORIGINS matches frontend URL |

## üìö Documentation

- **Complete Setup Guide:** [docs/SETUP.md](../docs/SETUP.md)
- **Main README:** [README.md](../README.md)
- **Task Breakdown:** [.agent/tasks/setup-automation.md](setup-automation.md)

## ‚è±Ô∏è Time Estimates

- **Automated Setup:** ~15 minutes
- **Manual Setup:** ~2 hours
- **Obtaining Credentials:** ~30 minutes (one-time)

## üí∞ Cost Estimate

Google Cloud (low traffic):
- Cloud Run: Free tier covers most usage
- Firestore: Free tier (1GB storage, 50K reads/day)
- Custom Search: 100 queries/day free
- AI Platform: Pay per request

**Estimated monthly cost:** $0-5 for development/low traffic

## ‚úÖ Setup Checklist

- [ ] Node.js 18+ installed
- [ ] npm dependencies installed
- [ ] Google Cloud account created
- [ ] GCP project created
- [ ] OAuth credentials obtained
- [ ] API key obtained
- [ ] Custom Search Engine created
- [ ] Service account key downloaded
- [ ] Local .env files configured
- [ ] Backend starts successfully
- [ ] Frontend starts successfully
- [ ] Can log in with Google
- [ ] GitHub secrets configured (for deployment)

## üéØ Next Steps After Setup

1. Test local development: `npm run dev`
2. Create your first card
3. Test Google Drive sync
4. Run tests: `npm test`
5. Push to GitHub to trigger deployment
6. Configure Stripe for premium features (optional)

---

**Need help?** See [docs/SETUP.md](../docs/SETUP.md) for detailed instructions and troubleshooting.
